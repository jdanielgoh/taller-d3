{"dependencies":[{"name":"./cartesian.js","loc":{"line":1,"column":62}},{"name":"./constant.js","loc":{"line":2,"column":21}},{"name":"./math.js","loc":{"line":3,"column":61}},{"name":"./rotation.js","loc":{"line":4,"column":28}}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.circleStream = circleStream;\n\nexports.default = function () {\n  var center = (0, _constant2.default)([0, 0]),\n      radius = (0, _constant2.default)(90),\n      precision = (0, _constant2.default)(6),\n      ring,\n      rotate,\n      stream = { point: point };\n\n  function point(x, y) {\n    ring.push(x = rotate(x, y));\n    x[0] *= _math.degrees, x[1] *= _math.degrees;\n  }\n\n  function circle() {\n    var c = center.apply(this, arguments),\n        r = radius.apply(this, arguments) * _math.radians,\n        p = precision.apply(this, arguments) * _math.radians;\n    ring = [];\n    rotate = (0, _rotation.rotateRadians)(-c[0] * _math.radians, -c[1] * _math.radians, 0).invert;\n    circleStream(stream, r, p, 1);\n    c = { type: \"Polygon\", coordinates: [ring] };\n    ring = rotate = null;\n    return c;\n  }\n\n  circle.center = function (_) {\n    return arguments.length ? (center = typeof _ === \"function\" ? _ : (0, _constant2.default)([+_[0], +_[1]]), circle) : center;\n  };\n\n  circle.radius = function (_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : (0, _constant2.default)(+_), circle) : radius;\n  };\n\n  circle.precision = function (_) {\n    return arguments.length ? (precision = typeof _ === \"function\" ? _ : (0, _constant2.default)(+_), circle) : precision;\n  };\n\n  return circle;\n};\n\nvar _cartesian = require(\"./cartesian.js\");\n\nvar _constant = require(\"./constant.js\");\n\nvar _constant2 = _interopRequireDefault(_constant);\n\nvar _math = require(\"./math.js\");\n\nvar _rotation = require(\"./rotation.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Generates a circle centered at [0°, 0°], with a given radius and precision.\nfunction circleStream(stream, radius, delta, direction, t0, t1) {\n  if (!delta) return;\n  var cosRadius = (0, _math.cos)(radius),\n      sinRadius = (0, _math.sin)(radius),\n      step = direction * delta;\n  if (t0 == null) {\n    t0 = radius + direction * _math.tau;\n    t1 = radius - step / 2;\n  } else {\n    t0 = circleRadius(cosRadius, t0);\n    t1 = circleRadius(cosRadius, t1);\n    if (direction > 0 ? t0 < t1 : t0 > t1) t0 += direction * _math.tau;\n  }\n  for (var point, t = t0; direction > 0 ? t > t1 : t < t1; t -= step) {\n    point = (0, _cartesian.spherical)([cosRadius, -sinRadius * (0, _math.cos)(t), -sinRadius * (0, _math.sin)(t)]);\n    stream.point(point[0], point[1]);\n  }\n}\n\n// Returns the signed angle of a cartesian point relative to [cosRadius, 0, 0].\nfunction circleRadius(cosRadius, point) {\n  point = (0, _cartesian.cartesian)(point), point[0] -= cosRadius;\n  (0, _cartesian.cartesianNormalizeInPlace)(point);\n  var radius = (0, _math.acos)(-point[1]);\n  return ((-point[2] < 0 ? -radius : radius) + _math.tau - _math.epsilon) % _math.tau;\n}"},"hash":"4c00b54861f874b3e5b54b579a19b01e"}